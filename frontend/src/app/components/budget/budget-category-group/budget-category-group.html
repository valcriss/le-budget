<div>
  <div class="flex flex-row bg-gray-50 px-2 h-8 text-sm font-semibold text-gray-500 mt-1 border-t border-b border-gray-200 border-l border-r">
    <div class="basis-0 flex items-center pr-2">
      <button type="button" (click)="toggleCollapsed($event)" aria-label="Plier / déplier" [attr.aria-expanded]="!collapsed" aria-controls="category-group-content" class="text-gray-400 text-xs cursor-pointer focus:outline-none">
        <!-- use a single icon and rotate it when open for a smooth transition -->
        <fa-icon [icon]="icChevronRight" [class.rotate-open]="!collapsed" class="chevron-icon"></fa-icon>
      </button>
    </div>
    <div class="basis-6/12 md:basis-3/12 flex items-center px-1 group">
      <div class="flex items-center gap-2 font-bold">
        <div class="text-gray-800 hover:underline cursor-pointer">{{ label }}</div>
        <div class="relative">
          <button type="button" (click)="onAddCategory($event)" aria-label="Ajouter une catégorie" class="peer cursor-pointer opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-150 text-gray-500 hover:text-[#58a9ff] focus:outline-none">
            <fa-icon [icon]="icAdd" class="text-base"></fa-icon>
            <span class="sr-only">Ajouter une catégorie</span>
          </button>
          <div class="absolute left-full top-1/2 -translate-y-1/2 ml-2 px-2 py-1 bg-gray-300 text-gray-500 border border-gray-400 text-xs rounded-sm opacity-0 peer-hover:opacity-100 peer-focus:opacity-100 transition-opacity duration-150 inline-flex items-center whitespace-nowrap">
            Ajouter une catégorie
          </div>
        </div>
      </div>
    </div>
    <div class="cursor-default pr-0 md:pr-2 font-bold basis-3/12 md:basis-3/12 flex items-center justify-end md:px-1 text-right" [class]="getAvailableClass(assigned)">
      {{ formatCurrencyWithSign(assigned) }}
    </div>
    <div class="cursor-default hidden font-bold basis-3/12 md:basis-3/12 md:flex items-center justify-end px-1 text-right" [class]="getAvailableClass(paid)">
      {{ formatCurrencyWithSign(paid) }}
    </div>
    <div class="cursor-default font-bold basis-3/12 md:basis-3/12 flex items-center justify-end px-1 text-right" [class]="getAvailableClass(available)">
      {{ formatCurrencyWithSign(available) }}
    </div>
  </div>
  <div id="category-group-content" #content role="region" [attr.aria-hidden]="collapsed" class="border-l border-r border-gray-200" [class.border-b]="!collapsed">
    <div class="collapse-inner">
      <ng-container *ngIf="items && items.length; else noItems">
        <app-budget-category-item *ngFor="let it of items" [label]="it.label" [assigned]="it.assigned" [paid]="it.paid" [available]="it.available"></app-budget-category-item>
      </ng-container>
      <ng-template #noItems>
        <div class="px-2 py-3 text-sm text-gray-500">Aucune catégorie dans ce groupe.</div>
      </ng-template>
    </div>
  </div>
</div>
